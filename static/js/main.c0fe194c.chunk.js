(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{31:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){},57:function(t,e,a){},58:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(16),i=a.n(s),o=(a(31),a(2)),c=a(3),l=a(5),u=a(4),p=a(7),d=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.location.pathname!==t.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return null}}]),a}(r.a.Component),h=Object(p.e)(d),f=a(13),j="MOVIES_LOADING",v="MOVIES_ERROR",b="MOVIES_SET",m="FAVORITES_LOADING",O="FAVORITES_ERROR",g="FAVORITES_SET",x="FAVORITES_DELETE",y=function(t){return{type:x,deleteIndex:t}};function k(t){return function(){t({type:j});for(var e=[],a=1;a<500;a++)e.push(fetch("https://api.themoviedb.org/3/discover/movie?primary_release_year=2021&sort_by=popularity.desc&api_key=953aabad8f5d4a2f206f8f80281ffd31&language=ru-RU&page="+a).then((function(t){if(t.ok)return t.json();throw new Error("fetch error "+t.status)})).then((function(t){return t.results})));Promise.all(e).then((function(t){for(var e=1;e<t.length;e++)if(t[0]=t[0].concat(t[e]),e===t.length-1)return t[0]})).then((function(e){t({type:b,movies:e}),console.log(e)})).catch((function(e){console.error(e),t({type:v})}))}}function w(t,e){return function(){t({type:m}),fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=953aabad8f5d4a2f206f8f80281ffd31&language=ru-RU")).then((function(t){if(t.ok)return t.json();throw new Error("fetch error "+t.status)})).then((function(e){t({type:g,favorites:e})})).catch((function(e){console.error(e),t({type:O})}))}}a(37);var N=a(8),_=(a(38),a(1)),S=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).setVoteClass=function(t){return t>=7.5?"green":t>=6?"orange":"red"},t}return Object(c.a)(a,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"movie",children:[Object(_.jsx)("img",{src:this.props.poster_path?"https://image.tmdb.org/t/p/w1280"+this.props.poster_path:"https://images.unsplash.com/photo-1542204637-e67bc7d41e48?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",alt:this.props.title}),Object(_.jsxs)("div",{className:"movie-info",children:[Object(_.jsx)("h3",{children:this.props.title}),Object(_.jsx)("span",{className:"tag ".concat(this.setVoteClass(this.props.vote_average)),children:this.props.vote_average})]}),Object(_.jsxs)("div",{className:"movie-over",children:[Object(_.jsx)("h2",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"}),Object(_.jsx)("p",{children:this.props.overview}),Object(_.jsx)(N.b,{to:"/FD3-Tylets/movie/"+this.props.id,className:"movie-info-link",children:" \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."})]})]})}}]),a}(r.a.PureComponent),I=S,D=(a(40),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(_.jsxs)("header",{children:[Object(_.jsxs)("div",{className:"logo",children:[Object(_.jsx)(N.b,{to:"/FD3-Tylets",className:"main-page-link",title:"Go Home",children:Object(_.jsx)("svg",{})}),Object(_.jsx)("h2",{children:"MoviesDB"})]}),Object(_.jsxs)(N.b,{to:"/FD3-Tylets/favlist",className:this.props.favorites.data.length>0?"favorite-list-link-active":"favorite-list-link",children:["\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435(",this.props.favorites.data.length,")"]})]})}}]),a}(r.a.PureComponent)),R=Object(f.b)((function(t){return{favorites:t.favorites}}))(D),C=(a(41),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={pages:[]},t.creator=function(){var e=[],a=Math.ceil(t.props.movies.data.length/60),n=t.props.currPage?t.props.currPage:1;if(a>5)if(n>3)for(var r=n-2;r<=n+2&&(e.push(r),r!==a);r++);else for(var s=1;s<=5&&(e.push(s),s!==a);s++);else for(var i=1;i<=a;i++)e.push(i);t.setState({pages:e})},t}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(t){if(this.props.currPage!==t.currPage)return this.creator()}},{key:"componentDidMount",value:function(){this.creator()}},{key:"render",value:function(){var t=this;return Object(_.jsx)("div",{className:"pages",children:this.state.pages.map((function(e,a){return Object(_.jsx)(N.b,{to:"/FD3-Tylets/pages/".concat(e),children:Object(_.jsx)("span",{className:t.props.currPage===e?"current-page":"page",children:e},a)})}))})}}]),a}(r.a.PureComponent)),E=Object(f.b)((function(t){return{movies:t.movies}}))(C),M=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={update:!1,perPage:24},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(k(this.props.dispatch))}},{key:"render",value:function(){var t=this.props.movies.data?this.props.page?this.props.movies.data.slice(this.props.page*this.state.perPage+1*this.props.page-this.state.perPage,this.props.page*this.state.perPage+1*this.props.page).map((function(t){return Object(_.jsx)(I,{title:t.title,poster_path:t.poster_path,overview:t.overview,vote_average:t.vote_average,id:t.id},t.id)})):this.props.movies.data.slice(0,this.state.perPage).map((function(t){return Object(_.jsx)(I,{title:t.title,poster_path:t.poster_path,overview:t.overview,vote_average:t.vote_average,id:t.id},t.id)})):Object(_.jsx)("div",{});return"loading"===this.props.movies.status?"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"error"===this.props.movies.status?"\u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445":Object(_.jsxs)("div",{children:[Object(_.jsx)(R,{}),Object(_.jsx)("div",{className:"App",children:t}),Object(_.jsx)(E,{currPage:this.props.page})]})}}]),a}(r.a.PureComponent),P=Object(f.b)((function(t){return{movies:t.movies}}))(M),T=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(_.jsx)(P,{})}}]),a}(r.a.PureComponent),F=T,A=(a(42),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={credits:[],dataReady:!1},t.fetchSuccess=function(e){t.setState({dataReady:!0,credits:e})},t.fetchError=function(t){console.error(t)},t.loadData=function(){fetch("https://api.themoviedb.org/3/movie/".concat(t.props.movieId,"/credits?api_key=953aabad8f5d4a2f206f8f80281ffd31&language=ru-RU")).then((function(t){if(t.ok)return t.json();throw new Error("fetch error "+t.status)})).then((function(e){t.fetchSuccess(e.cast.slice(0,7))})).catch((function(e){t.fetchError(e.massage)}))},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var t=this.state.credits.map((function(t){return Object(_.jsxs)("div",{className:"actor",children:[Object(_.jsx)("img",{src:"https://image.tmdb.org/t/p/w1280"+t.profile_path,alt:t.original_name}),Object(_.jsx)("p",{children:t.original_name}),Object(_.jsx)("p",{children:t.character})]},t.cast_id)}));return this.state.dataReady?Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"cast",children:[Object(_.jsx)("h2",{children:"Main cast"}),Object(_.jsx)("div",{className:"cast-slider",children:t})]})}):Object(_.jsx)("div",{children:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})}}]),a}(r.a.Component)),V=A,H=a(43).Doughnut,B=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this.props.vote>=7.5?"green":this.props.vote>=6?"orange":"red",e=[{value:10*this.props.vote,color:t},{value:100-10*this.props.vote,color:"black"}];return Object(_.jsx)(H,{data:e,options:{showTooltips:!1,segmentShowStroke:!1,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:70,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'},width:"70px",height:"70px"})}}]),a}(r.a.PureComponent),G=B,L=(a(54),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={added:!1},t.addToFavoriteList=function(){t.props.dispatch(w(t.props.dispatch,t.props.movieId)),console.log(t.props.favorites.data.findIndex((function(e){return e.id===t.props.movieId}))),t.setState({added:!0})},t.delete=function(){var e=t.props.favorites.data.findIndex((function(e){return e.id===t.props.movieId}));t.props.dispatch(y(e)),console.log(e),t.setState({added:!1})},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=this;-1===this.props.favorites.data.findIndex((function(e){return e.id===t.props.movieId}))?this.setState({added:!1}):this.setState({added:!0})}},{key:"render",value:function(){return Object(_.jsx)("div",{className:"buttons",children:this.state.added?Object(_.jsx)("div",{className:"button cross",onClick:this.delete,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e"}):Object(_.jsx)("div",{className:"button heart",onClick:this.addToFavoriteList,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})}}]),a}(r.a.PureComponent)),U=Object(f.b)((function(t){return{favorites:t.favorites}}))(L),J=(a(55),a(56),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={recMovies:[],dataReady:!1},t.fetchSuccess=function(e){t.setState({dataReady:!0,recMovies:e})},t.fetchError=function(t){console.error(t)},t.loadData=function(){fetch("https://api.themoviedb.org/3/movie/".concat(t.props.movieId,"/recommendations?api_key=953aabad8f5d4a2f206f8f80281ffd31&language=ru-RU")).then((function(t){if(t.ok)return t.json();throw new Error("fetch error "+t.status)})).then((function(e){t.fetchSuccess(e.results.slice(0,4))})).catch((function(e){t.fetchError(e.massage)}))},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var t=this.state.recMovies.map((function(t){return Object(_.jsxs)("div",{className:"rec-movie",children:[Object(_.jsxs)(N.b,{exact:!0,to:"/FD3-Tylets/movie/"+t.id,children:[" ",Object(_.jsx)("img",{src:"https://image.tmdb.org/t/p/w1280"+t.backdrop_path,alt:t.title})]}),Object(_.jsxs)("div",{className:"text-line",children:[Object(_.jsx)("p",{children:t.title}),Object(_.jsxs)("p",{children:[Math.floor(10*t.vote_average),"%"]})]})]},t.id)}));return this.state.dataReady?Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"Recommendations",children:[Object(_.jsx)("h2",{children:"Recommendations"}),Object(_.jsx)("div",{className:"rec-slider",children:t})]})}):Object(_.jsx)("div",{children:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})}}]),a}(r.a.Component)),W=J,q="https://image.tmdb.org/t/p/w1280",Y=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={info:[],dataReady:!1,added:!1},t.fetchSuccess=function(e){t.setState({dataReady:!0,info:e})},t.fetchError=function(t){console.error(t)},t.loadData=function(){fetch("https://api.themoviedb.org/3/movie/".concat(t.props.movieId,"?api_key=953aabad8f5d4a2f206f8f80281ffd31&language=ru-RU")).then((function(t){if(t.ok)return t.json();throw new Error("fetch error "+t.status)})).then((function(e){t.fetchSuccess(e)})).catch((function(e){t.fetchError(e.massage)}))},t}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.movieId!==t.movieId&&(this.loadData(),this.setState({dataReady:!1}))}},{key:"componentDidMount",value:function(){this.loadData(),console.log(this.props.movieId)}},{key:"render",value:function(){var t=10*this.state.info.vote_average;return this.state.dataReady?Object(_.jsxs)("div",{className:"movie_info",children:[Object(_.jsx)(R,{}),Object(_.jsxs)("div",{className:"movie-main-info",style:{background:"radial-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 1) ), \n                  no-repeat center/cover url(\n                    ".concat(this.state.info.backdrop_path?q+this.state.info.backdrop_path:"https://images.unsplash.com/photo-1542204637-e67bc7d41e48?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80")},children:[Object(_.jsx)("img",{src:this.state.info.poster_path?q+this.state.info.poster_path:"https://images.unsplash.com/photo-1542204637-e67bc7d41e48?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",className:"poster-image",alt:this.state.info.title}),Object(_.jsxs)("div",{className:"text-info",children:[Object(_.jsxs)("h1",{children:[this.state.info.title," ",this.state.info.release_date?"(".concat(this.state.info.release_date.slice(0,4),")"):""]}),Object(_.jsx)("p",{className:"original-title",children:this.state.info.original_title}),Object(_.jsxs)("p",{style:{fontStyle:"italic",margin:0},children:[this.state.info.runtime," min"]}),Object(_.jsx)("p",{className:"genre",children:this.state.info.genres?this.state.info.genres.map((function(t){return t.name})).join(", "):""}),Object(_.jsxs)("div",{className:"bttn-rating",children:[Object(_.jsxs)("div",{className:"rating",children:[Object(_.jsxs)("div",{className:"percent",children:[t,"%"]}),Object(_.jsx)(G,{className:"circle",vote:this.state.info.vote_average})]}),Object(_.jsx)(U,{movieId:this.props.movieId})]}),Object(_.jsx)("p",{style:{fontStyle:"italic",fontFamily:"Helvetica Neue",fontSize:"23px",opacity:"0.6"},children:this.state.info.tagline}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),this.state.info.overview]})]})]}),Object(_.jsx)(V,{movieId:this.props.movieId}),Object(_.jsx)(W,{movieId:this.props.movieId})]}):Object(_.jsx)("div",{children:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})}}]),a}(r.a.PureComponent),z=Y,K=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=parseInt(this.props.match.params.mid);return console.log(t),Object(_.jsx)(z,{movieId:t})}}]),a}(r.a.PureComponent),Q=K,X=(a(57),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.favorites)}},{key:"render",value:function(){var t=this.props.favorites.map((function(t){return Object(_.jsxs)("li",{className:"list-item",children:[Object(_.jsx)(N.b,{to:"/FD3-Tylets/movie/"+t.id,children:Object(_.jsx)("img",{className:"list-img",src:"https://image.tmdb.org/t/p/w1280"+t.poster_path,alt:t.title})}),Object(_.jsx)("p",{className:"title",children:t.title}),Object(_.jsx)("p",{className:"vote",children:t.vote_average}),Object(_.jsx)(U,{className:"btn",movieId:t.id})]},t.id)}));return Object(_.jsxs)("div",{className:"list-container",children:[Object(_.jsx)(R,{}),Object(_.jsx)("ul",{className:"list",children:t})]})}}]),a}(r.a.PureComponent)),Z=Object(f.b)((function(t){return{favorites:t.favorites.data}}))(X),$=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(_.jsx)(Z,{})}}]),a}(r.a.PureComponent),tt=$,et=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=parseInt(this.props.match.params.page);return Object(_.jsx)(P,{page:t})}}]),a}(r.a.PureComponent),at=et,nt=a(18),rt=a(25),st={status:0,data:null};var it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:var a={status:"loading",data:null};return a;case v:var n={status:"error",data:null};return n;case b:var r={status:"ok",data:e.movies};return r;default:return t}},ot=a(26),ct=a(19),lt={status:0,data:[]};var ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:var a=Object(ct.a)({},t);return a.status="loading",a;case O:var n=Object(ct.a)({},t);return n.status="error",n;case g:console.log("state \u0434\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0435\u0434\u044c\u044e\u0441\u0435\u0440\u043e\u043c:",t);var r=Object(ct.a)({},t);return r.status="ok",r.data=[].concat(Object(ot.a)(r.data),[e.favorites]),console.log("state \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0435\u0434\u044c\u044e\u0441\u0435\u0440\u043e\u043c:",r),r;case x:var s=Object(ct.a)({},t);return s.status="ok",s.data=s.data.slice(),s.data.splice(e.deleteIndex,1),console.log("state \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0435\u0434\u044c\u044e\u0441\u0435\u0440\u043e\u043c:",s),s;default:return t}},pt=Object(nt.b)({movies:it,favorites:ut}),dt=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},ht=Object(nt.c)(pt,dt,Object(nt.a)(rt.a));ht.subscribe((function(){localStorage.setItem("reduxState",JSON.stringify(ht.getState()))}));var ft=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(_.jsx)(f.a,{store:ht,children:Object(_.jsxs)("div",{children:[Object(_.jsx)(p.a,{path:"/FD3-Tylets",exact:!0,component:F}),Object(_.jsx)(p.a,{path:"/FD3-Tylets/pages/:page",exact:!0,component:at}),Object(_.jsx)(p.a,{path:"/FD3-Tylets/movie/:mid",exact:!0,component:Q}),Object(_.jsx)(p.a,{path:"/FD3-Tylets/favlist",exact:!0,component:tt})]})})}}]),a}(r.a.Component),jt=ft,vt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,59)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),s(t),i(t)}))};i.a.render(Object(_.jsxs)(N.a,{children:[Object(_.jsx)(h,{}),Object(_.jsx)(jt,{})]}),document.getElementById("root")),vt()}},[[58,1,2]]]);
//# sourceMappingURL=main.c0fe194c.chunk.js.map